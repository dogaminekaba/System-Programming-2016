2 days later I found my bug which stems from a != logic error. (duh)
This edited version can send files to server computer.